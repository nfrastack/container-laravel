#!/command/with-contenv bash

if [ "${STAGE,,}" = "develop" ] ; then
    APP_DEBUG=${APP_DEBUG:-"TRUE"}
else
    APP_DEBUG=${APP_DEBUG:-"FALSE"}
fi

DATA_PATH=${DATA_PATH:-"/data"} # Keep this at top of file
APP_NAME=${APP_NAME:-"Application"}
ARTISAN_SERVE_LISTEN_IP=${ARTISAN_SERVE_LISTEN_IP:-"0.0.0.0"}
ARTISAN_SERVE_LISTEN_PORT=${ARTISAN_SERVE_LISTEN_PORT:-"8000"}
BROADCAST_DRIVER=${BROADCAST_DRIVER:-"log"}
CACHE_DRIVER=${CACHE_DRIVER:-"file"}
CONFIG_FILE=${CONFIG_FILE:-"config"}
CONFIG_PATH=${CONFIG_PATH:-"${DATA_PATH}/config/"}
ENABLE_LARAVEL_ARTISAN_SERVE=${ENABLE_LARAVEL_ARTISAN_SERVE:-"TRUE"}
ENABLE_LARAVEL_ENV_WATCHER=${ENABLE_LARAVEL_ENV_WATCHER:-"TRUE"}
ENABLE_LARAVEL_NPM_RUN_DEV=${ENABLE_LARAVEL_NPM_RUN_DEV:-"TRUE"}
ENABLE_LARAVEL_NPM_WATCHER=${ENABLE_LARAVEL_NPM_WATCHER:-"FALSE"}
ENABLE_LARAVEL_WORKER=${ENABLE_LARAVEL_WORKER:-"TRUE"}
ENABLE_LOG_REDIRECTION=${ENABLE_LOG_REDIRECTION:-"TRUE"}
ENABLE_STORAGE_REDIRECTION=${ENABLE_STORAGE_REDIRECTION:-"TRUE"}
ENABLE_CONFIG_REDIRECTION=${ENABLE_CONFIG_REDIRECTION:-"TRUE"}
LARAVEL_IMAGE_MODE=${LARAVEL_IMAGE_MODE:-"development"}
LOG_CHANNEL=${LOG_CHANNEL:-"stack"}
LOG_FILE=${LOG_FILE:-"laravel.log"}
LOG_LDAP=${LOG_LDAP:-"TRUE"}
LOG_LEVEL=${LOG_LEVEL="INFO"}
LOG_PATH=${LOG_PATH:-"/www/logs/laravel/"}
MAIL_FROM_ADDRESS=${MAIL_FROM_ADDRESS:-"noreply@example.com"}
MAIL_FROM_NAME=${MAIL_FROM_NAME:-"Example"}
MEDIA_DISK=${MEDIA_DISK:-"media"}
REDIS_DB=${REDIS_DB:-"0"}
REDIS_PASS=${REDIS_PASS:-"null"}
REDIS_PORT=${REDIS_PORT:-"6379"}
SESSION_DRIVER=${SESSION_DRIVER:-"database"}
SESSION_LIFETIME=${SESSION_LIFETIME:-"120"}
SMTP_ENCRYPTION=${SMTP_ENCRYPTION:-"null"}
SMTP_HOST=${SMTP_HOST:-"postfix-relay"}
SMTP_PASS=${SMTP_PASS:-"null"}
SMTP_PORT=${SMTP_PORT:-"25"}
SMTP_USER=${SMTP_USER:-"null"}
STORAGE_PATH=${STORAGE_PATH:-"${DATA_PATH}/storage/"}

case "${DB_TYPE,,}" in
    "mysql" | "mariadb")
        DB_PORT=${DB_PORT:-"3306"}
    ;;
    "pgsql" | postgres* )
        DB_PORT=${DB_PORT:-"5432"}
    ;;
    sqlite* | * )
        DB_PORT=""
    ;;
esac